<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=yes">
    <title>Career Categories - Zawadi Careers</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/png" href="assets/images/zawadi-logo.png">
    <style>
        * {
            box-sizing: border-box;
        }
        
        body {
            margin: 0;
            padding: 0;
            overflow-x: hidden;
            width: 100%;
        }
        
        .categories-hero {
            background: linear-gradient(135deg, #0a2540 0%, #1a365d 100%);
            color: white;
            padding: 60px 16px;
            text-align: center;
            width: 100%;
        }
        
        .categories-hero h1 {
            font-size: clamp(28px, 8vw, 48px);
            margin-bottom: 16px;
            line-height: 1.2;
            word-wrap: break-word;
        }
        
        .categories-hero p {
            font-size: clamp(14px, 4vw, 18px);
            max-width: 600px;
            margin: 0 auto 20px;
            opacity: 0.9;
            padding: 0 10px;
            word-wrap: break-word;
        }
        
        .categories-grid-detailed {
            display: grid;
            grid-template-columns: minmax(0, 1fr);
            gap: 20px;
            padding: 40px 16px;
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }
        
        .category-card-detailed {
            background: white;
            border-radius: 20px;
            padding: 24px 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s, box-shadow 0.3s;
            border: 2px solid transparent;
            width: 100%;
            overflow: hidden;
        }
        
        .category-card-detailed:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            border-color: #0066cc;
        }
        
        .category-icon-large {
            width: 70px;
            height: 70px;
            background: linear-gradient(135deg, #0066cc 0%, #00b3ff 100%);
            border-radius: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 20px;
            font-size: 28px;
            color: white;
            flex-shrink: 0;
        }
        
        .category-content {
            width: 100%;
            overflow: hidden;
        }
        
        .category-content h2 {
            font-size: clamp(20px, 6vw, 24px);
            margin-bottom: 12px;
            color: #1a202c;
            line-height: 1.3;
            word-wrap: break-word;
        }
        
        .category-description {
            color: #4a5568;
            margin-bottom: 20px;
            line-height: 1.5;
            font-size: clamp(14px, 4vw, 16px);
            word-wrap: break-word;
        }
        
        .category-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
            margin-bottom: 20px;
            padding: 12px 0;
            border-top: 1px solid #e2e8f0;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .stat-item {
            text-align: center;
            min-width: 0; /* Prevents flex items from overflowing */
        }
        
        .stat-number {
            display: block;
            font-size: clamp(18px, 5vw, 24px);
            font-weight: 700;
            color: #0066cc;
            margin-bottom: 4px;
            line-height: 1.2;
            word-wrap: break-word;
        }
        
        .stat-label {
            font-size: clamp(11px, 3vw, 14px);
            color: #718096;
            word-wrap: break-word;
        }
        
        .category-topics {
            margin-bottom: 20px;
            width: 100%;
        }
        
        .category-topics h4 {
            font-size: 16px;
            margin-bottom: 12px;
            color: #2d3748;
        }
        
        .topics-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .topic-tag {
            background: #edf2f7;
            padding: 6px 12px;
            border-radius: 30px;
            font-size: clamp(12px, 3.5vw, 14px);
            color: #4a5568;
            white-space: nowrap;
            max-width: 100%;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .category-action {
            text-align: center;
            width: 100%;
        }
        
        .btn-explore-category {
            background: linear-gradient(90deg, #0066cc 0%, #00b3ff 100%);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 12px;
            font-weight: 600;
            font-size: clamp(14px, 4vw, 16px);
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            max-width: 280px;
            white-space: nowrap;
        }
        
        .btn-explore-category:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 102, 204, 0.2);
        }
        
        .category-articles {
            padding: 40px 16px;
            background: #f7fafc;
            width: 100%;
        }
        
        .articles-container {
            max-width: 1200px;
            margin: 0 auto;
            width: 100%;
        }
        
        .articles-header {
            display: flex;
            flex-direction: column;
            align-items: flex-start;
            gap: 15px;
            margin-bottom: 25px;
        }
        
        .articles-header h2 {
            font-size: clamp(24px, 6vw, 32px);
            color: #1a202c;
            margin: 0;
            word-wrap: break-word;
        }
        
        .articles-filter {
            display: flex;
            gap: 8px;
            width: 100%;
            overflow-x: auto;
            padding-bottom: 5px;
            -webkit-overflow-scrolling: touch;
            scrollbar-width: thin;
        }
        
        .filter-btn {
            padding: 8px 16px;
            border: 1px solid #e2e8f0;
            background: white;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
            white-space: nowrap;
            flex-shrink: 0;
        }
        
        .filter-btn.active {
            background: #0066cc;
            color: white;
            border-color: #0066cc;
        }
        
        .articles-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            width: 100%;
        }
        
        .article-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s;
            width: 100%;
        }
        
        .article-card:hover {
            transform: translateY(-5px);
        }
        
        .article-image {
            height: 160px;
            background: linear-gradient(135deg, #0066cc 0%, #00b3ff 100%);
            position: relative;
            width: 100%;
        }
        
        .article-category {
            position: absolute;
            top: 12px;
            left: 12px;
            background: rgba(255, 255, 255, 0.95);
            color: #0066cc;
            padding: 6px 12px;
            border-radius: 30px;
            font-size: 12px;
            font-weight: 600;
            z-index: 2;
            max-width: calc(100% - 24px);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        
        .article-content {
            padding: 16px;
        }
        
        .article-meta {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: #718096;
            margin-bottom: 8px;
            flex-wrap: wrap;
            gap: 8px;
        }
        
        .article-title {
            font-size: 18px;
            font-weight: 600;
            color: #1a202c;
            margin-bottom: 8px;
            line-height: 1.4;
            word-wrap: break-word;
        }
        
        .article-excerpt {
            font-size: 14px;
            color: #4a5568;
            margin-bottom: 12px;
            line-height: 1.5;
            word-wrap: break-word;
            display: -webkit-box;
            -webkit-line-clamp: 3;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }
        
        .article-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 12px;
            border-top: 1px solid #e2e8f0;
            flex-wrap: wrap;
            gap: 10px;
        }
        
        .read-time {
            font-size: 12px;
            color: #718096;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .read-more {
            color: #0066cc;
            font-size: 14px;
            font-weight: 600;
            text-decoration: none;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        /* Category-specific colors */
        .category-1 .category-icon-large {
            background: linear-gradient(135deg, #0066cc 0%, #00b3ff 100%);
        }
        
        .category-2 .category-icon-large {
            background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
        }
        
        .category-3 .category-icon-large {
            background: linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%);
        }
        
        .category-4 .category-icon-large {
            background: linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%);
        }
        
        .category-5 .category-icon-large {
            background: linear-gradient(135deg, #ef4444 0%, #f87171 100%);
        }
        
        .category-6 .category-icon-large {
            background: linear-gradient(135deg, #ec4899 0%, #f472b6 100%);
        }
        
        .category-7 .category-icon-large {
            background: linear-gradient(135deg, #14b8a6 0%, #2dd4bf 100%);
        }
        
        .no-articles {
            text-align: center;
            padding: 40px 20px;
            width: 100%;
            word-wrap: break-word;
        }
        
        .no-articles i {
            font-size: 48px;
            color: #cbd5e0;
            margin-bottom: 16px;
        }
        
        .no-articles h3 {
            color: #4a5568;
            margin-bottom: 8px;
            font-size: clamp(18px, 5vw, 20px);
        }
        
        .no-articles p {
            color: #718096;
            font-size: clamp(14px, 4vw, 16px);
        }
        
        /* Mobile Bottom Navigation */
        .mobile-bottom-nav {
            display: flex;
            justify-content: space-around;
            align-items: center;
            background: white;
            padding: 8px 12px;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 1000;
            box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.1);
            border-top: 1px solid #e2e8f0;
        }
        
        .nav-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: #718096;
            font-size: 12px;
            gap: 4px;
            padding: 4px 0;
            flex: 1;
            max-width: 70px;
        }
        
        .nav-icon i {
            font-size: 20px;
        }
        
        .nav-icon.active {
            color: #0066cc;
        }
        
        .nav-icon span {
            font-size: 11px;
            white-space: nowrap;
        }
        
        /* Footer */
        .footer {
            margin-bottom: 70px; /* Space for mobile nav */
        }
        
        /* Tablet and up */
        @media (min-width: 768px) {
            .categories-hero {
                padding: 80px 20px;
            }
            
            .categories-grid-detailed {
                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
                gap: 30px;
                padding: 60px 20px;
            }
            
            .category-card-detailed {
                padding: 40px;
            }
            
            .articles-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .articles-header {
                flex-direction: row;
                align-items: center;
                justify-content: space-between;
            }
            
            .btn-explore-category {
                width: auto;
            }
            
            .mobile-bottom-nav {
                display: none;
            }
            
            .footer {
                margin-bottom: 0;
            }
        }
        
        /* Desktop */
        @media (min-width: 1024px) {
            .articles-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }
        
        /* Small phones */
        @media (max-width: 380px) {
            .category-stats {
                gap: 4px;
            }
            
            .stat-number {
                font-size: 16px;
            }
            
            .stat-label {
                font-size: 10px;
            }
            
            .topic-tag {
                padding: 4px 8px;
                font-size: 11px;
            }
            
            .category-icon-large {
                width: 60px;
                height: 60px;
                font-size: 24px;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation (Same as index.html) -->
    <nav class="navbar">
        <!-- Same navigation as index.html -->
    </nav>

    <!-- Categories Hero -->
    <section class="categories-hero">
        <div class="container">
            <h1>Career Development Categories</h1>
            <p>Explore structured content organized by career stages and specific needs. Each category provides targeted resources to guide your professional journey.</p>
        </div>
    </section>

    <!-- Category Details -->
    <section class="categories-grid-detailed" id="categoryDetails">
        <!-- Categories will be loaded here based on URL parameter -->
    </section>

    <!-- Articles in Category -->
    <section class="category-articles">
        <div class="articles-container">
            <div class="articles-header">
                <h2>Latest Articles</h2>
                <div class="articles-filter">
                    <button class="filter-btn active">Latest</button>
                    <button class="filter-btn">Popular</button>
                    <button class="filter-btn">Most Read</button>
                </div>
            </div>
            <div class="articles-grid" id="categoryArticles">
                <!-- Articles will be loaded here -->
            </div>
        </div>
    </section>

    <!-- Mobile Bottom Navigation -->
    <div class="mobile-bottom-nav">
        <a href="index.html" class="nav-icon">
            <i class="fas fa-home"></i>
            <span>Home</span>
        </a>
        <a href="blog.html" class="nav-icon">
            <i class="fas fa-blog"></i>
            <span>Blog</span>
        </a>
        <a href="categories.html" class="nav-icon active">
            <i class="fas fa-th-large"></i>
            <span>Categories</span>
        </a>
        <a href="#" class="nav-icon">
            <i class="fas fa-bookmark"></i>
            <span>Saved</span>
        </a>
        <a href="#" class="nav-icon">
            <i class="fas fa-search"></i>
            <span>Search</span>
        </a>
    </div>

    <!-- Footer (Same as index.html) -->
    <footer class="footer">
        <!-- Same footer as index.html -->
    </footer>

    <script src="js/supabase.js" type="module"></script>
    <script src="js/main.js" type="module"></script>
    <script type="module">
    import supabase from './js/supabase.js';
    
    const categories = {
        'career-clarity': {
            id: 1,
            title: 'Career Clarity & Exploration',
            icon: 'fas fa-search',
            description: 'Discover your career path, understand different industries, and make informed career decisions with our comprehensive guidance and industry insights.',
            stats: {
                articles: 45,
                reads: '12K+',
                duration: '3-5 min'
            },
            topics: ['Career Assessment', 'Industry Research', 'Decision Making', 'Path Exploration', 'Self-Discovery']
        },
        'skill-development': {
            id: 2,
            title: 'Skill Development & Learning',
            icon: 'fas fa-laptop-code',
            description: 'Master in-demand skills with practical guides, learning roadmaps, and actionable strategies for professional growth in the African market.',
            stats: {
                articles: 78,
                reads: '25K+',
                duration: '5-7 min'
            },
            topics: ['Technical Skills', 'Soft Skills', 'Learning Paths', 'Online Courses', 'Certifications']
        },
        'job-search': {
            id: 3,
            title: 'Job Search & Career Advancement',
            icon: 'fas fa-briefcase',
            description: 'Navigate your job search successfully with CV guidance, interview preparation, career switching strategies, and workplace growth techniques.',
            stats: {
                articles: 62,
                reads: '18K+',
                duration: '4-6 min'
            },
            topics: ['CV Writing', 'Interview Prep', 'Networking', 'Career Switch', 'Promotion']
        },
        'opportunities': {
            id: 4,
            title: 'Opportunities & Openings',
            icon: 'fas fa-star',
            description: 'Access curated job listings, internships, graduate programs, and company spotlights specifically tailored for the African job market.',
            stats: {
                articles: '120+',
                reads: '35K+',
                duration: '2-4 min'
            },
            topics: ['Job Alerts', 'Internships', 'Graduate Programs', 'Company Reviews', 'Application Tips']
        },
        'professionals': {
            id: 5,
            title: 'Professionals & Leadership',
            icon: 'fas fa-user-tie',
            description: 'Advance your career with leadership development resources, workplace effectiveness strategies, and professional growth frameworks.',
            stats: {
                articles: 54,
                reads: '15K+',
                duration: '6-8 min'
            },
            topics: ['Leadership', 'Management', 'Productivity', 'Career Growth', 'Work-Life Balance']
        },
        'companies': {
            id: 6,
            title: 'Companies & Employers',
            icon: 'fas fa-building',
            description: 'Gain insights into employer expectations, hiring best practices, and what companies look for in talent across various industries.',
            stats: {
                articles: 36,
                reads: '8K+',
                duration: '4-5 min'
            },
            topics: ['Employer Insights', 'Hiring Trends', 'Company Culture', 'Talent Needs', 'Industry Demand']
        },
        'stories': {
            id: 7,
            title: 'Stories, Mentorship & Insights',
            icon: 'fas fa-book-open',
            description: 'Learn from real career journeys, mentorship advice, and personal insights that provide practical lessons and inspiration.',
            stats: {
                articles: 89,
                reads: '30K+',
                duration: '7-10 min'
            },
            topics: ['Career Stories', 'Mentorship', 'Lessons Learned', 'Success Stories', 'Challenges']
        }
    };
    
    document.addEventListener('DOMContentLoaded', async function() {
        // Get category from URL
        const urlParams = new URLSearchParams(window.location.search);
        const categoryParam = urlParams.get('category') || 'career-clarity';
        
        const category = categories[categoryParam];
        
        if (category) {
            // Update page title
            document.title = `${category.title} - Zawadi Careers`;
            
            // Load category details
            loadCategoryDetails(category);
            
            // Load category articles
            await loadCategoryArticles(category.id);
        }
    });
    
    function loadCategoryDetails(category) {
        const container = document.getElementById('categoryDetails');
        
        container.innerHTML = `
            <div class="category-card-detailed category-${category.id}">
                <div class="category-icon-large">
                    <i class="${category.icon}"></i>
                </div>
                <div class="category-content">
                    <h2>${category.title}</h2>
                    <p class="category-description">${category.description}</p>
                    
                    <div class="category-stats">
                        <div class="stat-item">
                            <span class="stat-number">${category.stats.articles}</span>
                            <span class="stat-label">Articles</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">${category.stats.reads}</span>
                            <span class="stat-label">Total Reads</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">${category.stats.duration}</span>
                            <span class="stat-label">Avg Read Time</span>
                        </div>
                    </div>
                    
                    <div class="category-topics">
                        <h4>Key Topics Covered</h4>
                        <div class="topics-list">
                            ${category.topics.map(topic => `
                                <span class="topic-tag">${topic}</span>
                            `).join('')}
                        </div>
                    </div>
                    
                    <div class="category-action">
                        <button class="btn-explore-category" onclick="loadAllCategoryArticles(${category.id})">
                            <i class="fas fa-book-open"></i>
                            Explore All Articles
                        </button>
                    </div>
                </div>
            </div>
        `;
    }
    
    async function loadCategoryArticles(categoryId) {
        try {
            const { data: articles, error } = await supabase
                .from('blogs')
                .select('*')
                .eq('category_id', categoryId)
                .order('created_at', { ascending: false })
                .limit(6);
            
            if (error) throw error;
            
            const container = document.getElementById('categoryArticles');
            
            if (articles && articles.length > 0) {
                container.innerHTML = articles.map(article => {
                    // Get the image URL - adjust this based on your database field name
                    // Common field names: 'image_url', 'thumbnail', 'featured_image', etc.
                    const imageUrl = article.image_url || article.thumbnail || article.featured_image || null;
                    
                    // Generate a consistent color based on category ID for fallback
                    const categoryColors = {
                        1: 'linear-gradient(135deg, #0066cc 0%, #00b3ff 100%)',
                        2: 'linear-gradient(135deg, #10b981 0%, #34d399 100%)',
                        3: 'linear-gradient(135deg, #f59e0b 0%, #fbbf24 100%)',
                        4: 'linear-gradient(135deg, #8b5cf6 0%, #a78bfa 100%)',
                        5: 'linear-gradient(135deg, #ef4444 0%, #f87171 100%)',
                        6: 'linear-gradient(135deg, #ec4899 0%, #f472b6 100%)',
                        7: 'linear-gradient(135deg, #14b8a6 0%, #2dd4bf 100%)'
                    };
                    
                    const fallbackGradient = categoryColors[article.category_id] || 'linear-gradient(135deg, #0066cc 0%, #00b3ff 100%)';
                    
                    // Get category name for display
                    const categoryName = getCategoryName(article.category_id);
                    
                    // Get first letter of title for fallback icon
                    const titleFirstLetter = article.title ? article.title.charAt(0).toUpperCase() : 'A';
                    
                    return `
                        <div class="article-card">
                            <div class="article-image" style="background: ${imageUrl ? `url('${imageUrl}')` : fallbackGradient}; background-size: cover; background-position: center; position: relative;">
                                ${!imageUrl ? `
                                    <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; display: flex; align-items: center; justify-content: center; color: white; font-size: 48px; font-weight: bold; text-shadow: 0 2px 10px rgba(0,0,0,0.2);">
                                        ${titleFirstLetter}
                                    </div>
                                ` : ''}
                                <div class="article-category">${categoryName}</div>
                            </div>
                            <div class="article-content">
                                <div class="article-meta">
                                    <span><i class="far fa-calendar-alt"></i> ${new Date(article.created_at).toLocaleDateString()}</span>
                                    <span><i class="far fa-clock"></i> ${article.read_time || '5'} min read</span>
                                </div>
                                <h3 class="article-title">${article.title}</h3>
                                <p class="article-excerpt">${article.excerpt || (article.content ? article.content.substring(0, 150) : 'No description available')}...</p>
                                <div class="article-footer">
                                    <span class="read-time">
                                        <i class="fas fa-clock"></i>
                                        ${article.read_time || '5'} min
                                    </span>
                                    <a href="blog-detail.html?id=${article.id}" class="read-more">
                                        Read More
                                        <i class="fas fa-arrow-right"></i>
                                    </a>
                                </div>
                            </div>
                        </div>
                    `;
                }).join('');
            } else {
                container.innerHTML = `
                    <div class="no-articles">
                        <i class="fas fa-newspaper"></i>
                        <h3>No articles yet</h3>
                        <p>Check back soon for new content in this category!</p>
                    </div>
                `;
            }
            
        } catch (error) {
            console.error('Error loading category articles:', error);
            const container = document.getElementById('categoryArticles');
            container.innerHTML = `
                <div class="no-articles">
                    <i class="fas fa-exclamation-circle"></i>
                    <h3>Error loading articles</h3>
                    <p>Please try again later.</p>
                </div>
            `;
        }
    }
    
    function getCategoryName(categoryId) {
        const categoryMap = {
            1: 'Career Clarity',
            2: 'Skill Development',
            3: 'Job Search',
            4: 'Opportunities',
            5: 'Professionals',
            6: 'Companies',
            7: 'Stories'
        };
        
        return categoryMap[categoryId] || 'General';
    }
    
    // Make function available globally
    window.loadAllCategoryArticles = async function(categoryId) {
        // Load all articles for the category
        window.location.href = `blog.html?category=${Object.keys(categories).find(key => categories[key].id === categoryId)}`;
    };
</script>
</body>
</html>